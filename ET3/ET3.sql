-- phpMyAdmin SQL Dump
-- version 4.2.12deb2
-- http://www.phpmyadmin.net
--
-- Servidor: localhost
-- Tiempo de generación: 02-12-2016 a las 06:14:47
-- Versión del servidor: 5.5.44-0+deb8u1
-- Versión de PHP: 5.6.13-0+deb8u1

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";

DROP DATABASE IF EXISTS `IU2016`;
CREATE DATABASE IF NOT EXISTS `IU2016` DEFAULT CHARACTER SET utf8 COLLATE utf8_spanish_ci;
USE `IU2016`;


GRANT ALL PRIVILEGES ON `IU2016`.* TO 'iu2016'@'localhost' IDENTIFIED BY 'iu2016';

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

--
-- Base de datos: `ET3`
--

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `CORREO`
--

CREATE TABLE IF NOT EXISTS `CORREO` (
`ID_CORREO` int(11) NOT NULL,
  `EMISOR` varchar(9) NOT NULL,
  `RECEPTOR` varchar(9) NOT NULL,
  `ASUNTO` varchar(50) NOT NULL,
  `CONTENIDO` varchar(400) NOT NULL,
  `FECHAENVIO` date NOT NULL,
  `FECHAENTREGA` date NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `ENTREGABLE`
--

CREATE TABLE IF NOT EXISTS `ENTREGABLE` (
`ID_ENTREGABLE` int(3) NOT NULL,
  `NOMBRE` varchar(15) NOT NULL,
  `ESTADO` int(11) NOT NULL,
  `URL` varchar(30) NOT NULL,
  `ID_MIEMBRO` varchar(9) NOT NULL,
  `FECHASUBIDA` date NOT NULL,
  `ID_TAREA` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `MIEMBRO`
--

CREATE TABLE IF NOT EXISTS `MIEMBRO` (
  `DNI` varchar(9) NOT NULL,
  `NOMBRE` varchar(13) NOT NULL,
  `APELLIDO1` varchar(13) NOT NULL,
  `APELLIDO2` varchar(13) NOT NULL,
  `USUARIO` varchar(10) NOT NULL,
  `CONTRASEÑA` int(11) NOT NULL,
  `CORRREO` varchar(25) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `NOTIFICACION`
--

CREATE TABLE IF NOT EXISTS `NOTIFICACION` (
`ID_NOTIFICACION` int(11) NOT NULL,
  `EMISOR` varchar(9) NOT NULL,
  `RECEPTOR` varchar(9) NOT NULL,
  `CONTENIDO` varchar(200) NOT NULL,
  `FECHAENVIO` date NOT NULL,
  `FECHALECTURA` date NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `PROYECTO`
--

CREATE TABLE IF NOT EXISTS `PROYECTO` (
`ID_PROYECTO` int(3) NOT NULL,
  `NOMBRE` varchar(20) NOT NULL,
  `DESCRIPCION` varchar(200) NOT NULL,
  `FECHAI` date NOT NULL,
  `FECHAIP` date NOT NULL,
  `FECHAE` date NOT NULL,
  `FECHAFP` date NOT NULL,
  `NUMEROMIEBROS` int(3) NOT NULL,
  `NUMEROHORAS` int(5) NOT NULL,
  `DIRECTOR` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- --------------------------------------------------------

--
-- Estructura de tabla para la tabla `TAREA`
--

CREATE TABLE IF NOT EXISTS `TAREA` (
  `PADRE` int(11) NOT NULL,
`ID_TAREA` int(11) NOT NULL,
  `NOMBRE` varchar(15) NOT NULL,
  `FECHAIP` date NOT NULL,
  `FECHAIR` date NOT NULL,
  `FECHAEP` date NOT NULL,
  `FECHAER` date NOT NULL,
  `HORASP` int(11) NOT NULL,
  `HORASR` int(11) NOT NULL,
  `ID_MIEMBRO` varchar(9) NOT NULL,
  `DESCRIPCION` varchar(200) NOT NULL,
  `ESTADO` int(11) NOT NULL,
  `COMENTARIO` varchar(100) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Índices para tablas volcadas
--

--
-- Indices de la tabla `CORREO`
--
ALTER TABLE `CORREO`
 ADD PRIMARY KEY (`ID_CORREO`), ADD KEY `EMISOR` (`EMISOR`), ADD KEY `RECEPTOR` (`RECEPTOR`);

--
-- Indices de la tabla `ENTREGABLE`
--
ALTER TABLE `ENTREGABLE`
 ADD PRIMARY KEY (`ID_ENTREGABLE`), ADD UNIQUE KEY `ID_TAREA` (`ID_TAREA`), ADD KEY `ID_MIEMBRO` (`ID_MIEMBRO`), ADD KEY `ID_TAREA_2` (`ID_TAREA`);

--
-- Indices de la tabla `MIEMBRO`
--
ALTER TABLE `MIEMBRO`
 ADD PRIMARY KEY (`DNI`);

--
-- Indices de la tabla `NOTIFICACION`
--
ALTER TABLE `NOTIFICACION`
 ADD PRIMARY KEY (`ID_NOTIFICACION`), ADD KEY `EMISOR` (`EMISOR`), ADD KEY `RECEPTOR` (`RECEPTOR`);

--
-- Indices de la tabla `PROYECTO`
--
ALTER TABLE `PROYECTO`
 ADD PRIMARY KEY (`ID_PROYECTO`);

--
-- Indices de la tabla `TAREA`
--
ALTER TABLE `TAREA`
 ADD PRIMARY KEY (`ID_TAREA`), ADD KEY `ID_MIEMBRO` (`ID_MIEMBRO`);

--
-- AUTO_INCREMENT de las tablas volcadas
--

--
-- AUTO_INCREMENT de la tabla `CORREO`
--
ALTER TABLE `CORREO`
MODIFY `ID_CORREO` int(11) NOT NULL AUTO_INCREMENT;
--
-- AUTO_INCREMENT de la tabla `ENTREGABLE`
--
ALTER TABLE `ENTREGABLE`
MODIFY `ID_ENTREGABLE` int(3) NOT NULL AUTO_INCREMENT;
--
-- AUTO_INCREMENT de la tabla `NOTIFICACION`
--
ALTER TABLE `NOTIFICACION`
MODIFY `ID_NOTIFICACION` int(11) NOT NULL AUTO_INCREMENT;
--
-- AUTO_INCREMENT de la tabla `PROYECTO`
--
ALTER TABLE `PROYECTO`
MODIFY `ID_PROYECTO` int(3) NOT NULL AUTO_INCREMENT;
--
-- AUTO_INCREMENT de la tabla `TAREA`
--
ALTER TABLE `TAREA`
MODIFY `ID_TAREA` int(11) NOT NULL AUTO_INCREMENT;
--
-- Restricciones para tablas volcadas
--

--
-- Filtros para la tabla `CORREO`
--
ALTER TABLE `CORREO`
ADD CONSTRAINT `RECEPTOR` FOREIGN KEY (`RECEPTOR`) REFERENCES `MIEMBRO` (`DNI`),
ADD CONSTRAINT `EMISOR` FOREIGN KEY (`EMISOR`) REFERENCES `MIEMBRO` (`DNI`);

--
-- Filtros para la tabla `ENTREGABLE`
--
ALTER TABLE `ENTREGABLE`
ADD CONSTRAINT `TAREAID` FOREIGN KEY (`ID_TAREA`) REFERENCES `TAREA` (`ID_TAREA`),
ADD CONSTRAINT `DNI` FOREIGN KEY (`ID_MIEMBRO`) REFERENCES `MIEMBRO` (`DNI`);

--
-- Filtros para la tabla `NOTIFICACION`
--
ALTER TABLE `NOTIFICACION`
ADD CONSTRAINT `DNIRECPTOR` FOREIGN KEY (`RECEPTOR`) REFERENCES `MIEMBRO` (`DNI`),
ADD CONSTRAINT `DNIEMISOR` FOREIGN KEY (`EMISOR`) REFERENCES `MIEMBRO` (`DNI`);

--
-- Filtros para la tabla `TAREA`
--
ALTER TABLE `TAREA`
ADD CONSTRAINT `foreing key` FOREIGN KEY (`ID_MIEMBRO`) REFERENCES `MIEMBRO` (`DNI`);

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
